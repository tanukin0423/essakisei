<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>他人を巻き込んで何かを達成した経験（六段論法）</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            margin: 0;
        }

        header {
            margin-bottom: 20px;
            text-align: center;
        }

        h1 {
            color: #333;
            font-size: 1.8em;
        }

        form {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 800px;
        }

        label {
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }

        input, textarea, select {
            margin-bottom: 15px;
            padding: 10px;
            font-size: 1em;
            width: 100%;
            box-sizing: border-box;
        }

        textarea {
            resize: vertical;
            height: 100px;
        }

        button {
            margin-top: 20px;
            padding: 15px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 1.1em;
            width: 100%;
        }

        button:hover {
            background-color: #0056b3;
        }

        .output-container {
            margin-top: 20px;
            width: 100%;
            max-width: 800px;
        }

        .output-container h2 {
            color: #333;
        }

        #aiPromptModal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 90%;
            max-width: 600px;
        }

        #aiPromptText {
            width: 100%;
            height: 200px;
            margin-bottom: 15px;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.5em;
            }

            label {
                font-size: 1em;
            }

            input, textarea, select, button {
                font-size: 0.9em;
            }

            .modal-content {
                width: 95%;
                margin: 5% auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>他人を巻き込んで何かを達成した経験（六段論法）</h1>
    </header>
    <main>
        <form id="teamAchievementForm">
            <label for="goalSelect">1. 目標 (何を達成しようとしたか):</label>
            <select id="goalSelect">
                <option value="">-- 選択してください --</option>
                <option value="university_festival">大学祭で、過去最高の来場者数を記録するイベントを企画・運営することを目指しました。</option>
                <option value="environmental_activity">地域の環境問題に取り組むため、100人規模の清掃ボランティア活動を組織することを目標としました。</option>
                <option value="business_project">学内の起業サークルで、実際に収益を上げるビジネスプロジェクトを立ち上げることを目指しました。</option>
            </select>
            <textarea id="goal" placeholder="例: 大学祭で、過去最高の来場者数を記録するイベントを企画・運営することを目指しました。"></textarea>

            <label for="challenge">2. 課題 (どんな困難があったか):</label>
            <textarea id="challenge" placeholder="例: 予算が限られていた上、スタッフの経験不足や意見の対立があり、魅力的なイベント企画の立案と効果的な広報活動の実施が困難でした。"></textarea>

            <label for="action">3. 行動 (どのように他人を巻き込んだか):</label>
            <textarea id="action" placeholder="例: まず、各メンバーの強みを活かせるよう役割を再分配しました。次に、アイデアソンを開催して全員参加型の企画立案を行い、SNSを活用した広報戦略を立てました。さらに、地域企業にスポンサーとしての参加を呼びかけ、予算と協力を確保しました。"></textarea>

            <label for="obstacle">4. 障害 (どんな問題が発生したか):</label>
            <textarea id="obstacle" placeholder="例: 企画の途中で数名のメンバーが脱退し、残されたメンバーのモチベーションが低下しました。また、予定していたイベント会場が使用できなくなり、急遽代替案を考える必要が生じました。"></textarea>

            <label for="resolution">5. 解決 (どのように問題を克服したか):</label>
            <textarea id="resolution" placeholder="例: チーム全体で再度目標を確認し、各自の役割の重要性を再認識しました。新たなメンバーを募集し、フレッシュなアイデアを取り入れました。会場問題では、大学の協力を得て、キャンパス内の複数の場所を使用する分散型イベントに変更し、むしろ規模を拡大することができました。"></textarea>

            <label for="result">6. 結果 (最終的にどうなったか):</label>
            <textarea id="result" placeholder="例: 最終的に、過去最高の来場者数を20%上回る盛況なイベントとなりました。分散型イベントへの変更が功を奏し、より多様な企画が実現。参加者アンケートでも高評価を得ました。この成功体験により、チームの結束力が高まり、翌年はさらに大規模なイベントの企画・運営を任されることになりました。"></textarea>
        </form>

        <button type="button" id="generateBtn">テキストを作成</button>

        <div id="output" class="output-container"></div>
        <div id="aiPromptModal" class="modal">
            <div class="modal-content">
                <h2>AIに添削依頼するプロンプト</h2>
                <textarea id="aiPromptText"></textarea>
                <button id="copyPromptBtn">プロンプトをコピー</button>
                <button id="closeModalBtn">閉じる</button>
            </div>
        </div>
    </main>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('teamAchievementForm');
    const output = document.getElementById('output');
    const generateBtn = document.getElementById('generateBtn');
    const goalSelect = document.getElementById('goalSelect');

    generateBtn.addEventListener('click', generateEntrySheet);
    goalSelect.addEventListener('change', updateFormFields);

    const formData = {
        university_festival: {
            goal: "大学祭で、過去最高の来場者数を記録するイベントを企画・運営することを目指しました。",
            challenge: "予算が限られていた上、スタッフの経験不足や意見の対立があり、魅力的なイベント企画の立案と効果的な広報活動の実施が困難でした。",
            action: "まず、各メンバーの強みを活かせるよう役割を再分配しました。次に、アイデアソンを開催して全員参加型の企画立案を行い、SNSを活用した広報戦略を立てました。さらに、地域企業にスポンサーとしての参加を呼びかけ、予算と協力を確保しました。",
            obstacle: "企画の途中で数名のメンバーが脱退し、残されたメンバーのモチベーションが低下しました。また、予定していたイベント会場が使用できなくなり、急遽代替案を考える必要が生じました。",
            resolution: "チーム全体で再度目標を確認し、各自の役割の重要性を再認識しました。新たなメンバーを募集し、フレッシュなアイデアを取り入れました。会場問題では、大学の協力を得て、キャンパス内の複数の場所を使用する分散型イベントに変更し、むしろ規模を拡大することができました。",
            result: "最終的に、過去最高の来場者数を20%上回る盛況なイベントとなりました。分散型イベントへの変更が功を奏し、より多様な企画が実現。参加者アンケートでも高評価を得ました。この成功体験により、チームの結束力が高まり、翌年はさらに大規模なイベントの企画・運営を任されることになりました。"
        },
        environmental_activity: {
            goal: "地域の環境問題に取り組むため、100人規模の清掃ボランティア活動を組織することを目標としました。",
            challenge: "ボランティアの募集が思うように進まず、また参加者のモチベーション維持や活動資金の確保、地域との調整など、多くの課題に直面しました。",
            action: "学内外のネットワークを活用し、SNSでの情報拡散や学校掲示板での告知を行いました。地域の環境NPOと連携し、専門知識や資材の提供を受けました。また、参加者向けのオリエンテーションを開催し、活動の意義を共有してモチベーションを高めました。",
            obstacle: "活動当日、予想外の悪天候により参加者が大幅に減少しました。また、一部の地域住民から騒音などの苦情が寄せられ、活動の継続が危ぶまれる事態となりました。",
            resolution: "急遽、オンラインでの参加オプションを設け、現地参加者と合わせてバーチャルクリーンアップを実施しました。地域住民との対話の場を設け、活動の意義を丁寧に説明するとともに、騒音対策を行いました。この対応により、むしろ地域との連携が強化され、継続的な活動への協力を得ることができました。",
            result: "オンライン参加者も含め、当初の目標を上回る150人以上が活動に参加。清掃活動により地域の美化に貢献し、地元メディアにも取り上げられました。地域住民との対話を通じて信頼関係が構築され、定期的な環境活動としての継続が決定。参加者の環境意識向上にも大きく寄与しました。"
        },
        business_project: {
            goal: "学内の起業サークルで、実際に収益を上げるビジネスプロジェクトを立ち上げることを目指しました。",
            challenge: "メンバー間での経験や知識の差が大きく、実現可能なビジネスアイデアの創出や役割分担、資金調達など、様々な面で困難がありました。",
            action: "メンバーのスキルマップを作成し、適材適所の人員配置を行いました。外部の起業家をメンターとして招き、実践的なアドバイスを受けました。クラウドファンディングを活用して資金を調達し、同時にプロジェクトの認知度も向上させました。",
            obstacle: "プロジェクト開始後、当初の事業計画に問題が見つかり、大幅な軌道修正が必要になりました。チーム内で意見が対立し、プロジェクトの存続自体が危ぶまれる状況に陥りました。",
            resolution: "全メンバーが参加するオープンな議論の場を設け、問題点を洗い出し、新たな事業計画を協働で作成しました。外部メンターの助言を積極的に取り入れ、より実現可能性の高いプランに修正しました。チーム内のコミュニケーションを改善するため、定期的なフィードバックセッションを導入し、お互いの意見を尊重する文化を醸成しました。",
            result: "修正した事業計画に基づき、6ヶ月後に学生向けオンラインマーケットプレイスを立ち上げ、初年度で黒字化を達成しました。大学からも高い評価を受け、起業家育成プログラムのモデルケースとして紹介されました。チームメンバーの多くが、この経験を活かして卒業後も起業やスタートアップへの就職を選択しました。"
        }
    };

    function updateFormFields() {
        const selectedOption = goalSelect.value;
        if (selectedOption in formData) {
            for (const [key, value] of Object.entries(formData[selectedOption])) {
                document.getElementById(key).value = value;
            }
        }
    }

    function generateEntrySheet() {
        const fields = ['goal', 'challenge', 'action', 'obstacle', 'resolution', 'result'];
        const entrySheet = fields.reduce((acc, field) => {
            const value = document.getElementById(field).value;
            return acc + `【${field}】\n${value}\n\n`;
        }, '');

        output.innerHTML = `
            <h2>作成されたエントリシート</h2>
            <pre>${escapeHTML(entrySheet)}</pre>
            <button id="downloadBtn">ダウンロード</button>
            <button id="aiPromptBtn">AIに添削依頼するプロンプトを作成</button>
        `;

        document.getElementById('downloadBtn').addEventListener('click', () => downloadText(entrySheet));
        document.getElementById('aiPromptBtn').addEventListener('click', () => generateAIReviewPrompt(entrySheet));
    }

    function downloadText(text) {
        const blob = new Blob([text], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'entry_sheet.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    function generateAIReviewPrompt(entrySheet) {
        const prompt = `以下のエントリーシートは、他人を巻き込んで何かを成し遂げた経験のエントリーシートです。文章の構成、表現、内容の一貫性などを確認し、改善点があれば指摘してください。また、より効果的な表現や追加すべき情報があれば提案してください。

${entrySheet}

添削のポイント：
1.冒頭に他人を巻き込んで成し遂げた経験を一行で表してください。
2. 文章の論理性と一貫性
3. 具体的なエピソードの使用
4. 成果や学びの明確な表現
5. 文法や語彙の適切さ
6. 全体的な印象と改善提案

改善案を提示する際は、具体的な修正例を含めてください。また、エントリーシートの良い点も指摘し、それをさらに強化する方法があれば提案してください。
最後に、添削後の文章を400文字～450文字の一つの段落にまとめて提示してください。`

        document.getElementById('aiPromptText').value = prompt;
        document.getElementById('aiPromptModal').style.display = 'block';
    }

    document.getElementById('copyPromptBtn').addEventListener('click', () => {
        const promptText = document.getElementById('aiPromptText');
        promptText.select();
        document.execCommand('copy');
        alert('プロンプトをクリップボードにコピーしました。');
    });

    document.getElementById('closeModalBtn').addEventListener('click', () => {
        document.getElementById('aiPromptModal').style.display = 'none';
    });

    function escapeHTML(str) {
        return str.replace(/[&<>'"]/g, 
            tag => ({
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                "'": '&#39;',
                '"': '&quot;'
            }[tag] || tag)
        );
    }
});
    </script>
</body>
</html>